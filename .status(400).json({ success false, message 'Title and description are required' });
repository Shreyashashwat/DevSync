[1mdiff --cc backend/src/controllers/complaintController.js[m
[1mindex 959168f,5fca140..0000000[m
[1m--- a/backend/src/controllers/complaintController.js[m
[1m+++ b/backend/src/controllers/complaintController.js[m
[36m@@@ -1,20 -1,19 +1,11 @@@[m
  import Complaint from '../models/Complaint.js';[m
[31m -// import { sendNotification, sendEmail } from '../firebase/SendNotification.js';[m
[31m -import User from '../models/User.js';[m
[31m -[m
[31m -/**[m
[31m - * Submit Complaint â€” Citizen creates a new complaint[m
[31m - * Handles: text fields + optional photo + location[m
[31m - */[m
[32m +import { sendNotification, sendEmail } from '../firebase/SendNotification.js';[m
[32m +import User  from '../models/User.js';[m
[31m- [m
[31m- /**[m
[31m-  * , sendEmail[m
[31m-  * Submit Complaint â€” Citizen creates a new complaint[m
[31m-  * Handles: text fields + optional photo + location[m
[31m-  */[m
  export const submitComplaint = async (req, res) => {[m
    try {[m
[31m--    // Ensure user info exists[m
      if (!req.user || !req.user.id) {[m
        return res.status(401).json({ success: false, message: 'User not authenticated' });[m
      }[m
[31m--[m
[31m--    // Role check: only citizen/user can submit[m
      if (!'citizen'.includes(req.user.role)) {[m
        return res.status(403).json({ success: false, message: 'Only citizens can submit complaints' });[m
      }[m
[36m@@@ -38,7 -37,7 +29,7 @@@[m
      const photo_url = req.file?.path || '';[m
  [m
      const complaintData = {[m
[31m--      submitted_by: req.user.id, // must match JWT payload user.id[m
[32m++      submitted_by: req.user.id,[m
        title: title.trim(),[m
        description: description.trim(),[m
        category,[m
[36m@@@ -69,9 -68,9 +60,7 @@@[m
    }[m
  };[m
  [m
[31m--/**[m
[31m-- * Get Complaints â€” returns complaints based on role[m
[31m-- */[m
[32m++[m
  export const getComplaints = async (req, res) => {[m
    try {[m
      if (!req.user || !req.user.id) {[m
